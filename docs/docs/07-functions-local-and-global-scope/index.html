<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Functions#Instead of repeating some code block, or calling a dofile multiple times, we can use a function, which is an abstraction to structure a block of code.
These blocks are the same, except the variable n n = &#34;Alice&#34; s = &#34;Hi, my name is &#34; .. n print(s) n = &#34;Bob&#34; s = &#34;Hi, my name is &#34; .. n print(s) Execute &#187; It can be extracted into a function and give it a name SayHello and parameter n Because the functions contain multiple statements we need to use end keyword to indicate end of function."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="07. Functions, local and global scope"><meta property="og:description" content="Functions#Instead of repeating some code block, or calling a dofile multiple times, we can use a function, which is an abstraction to structure a block of code.
These blocks are the same, except the variable n n = &#34;Alice&#34; s = &#34;Hi, my name is &#34; .. n print(s) n = &#34;Bob&#34; s = &#34;Hi, my name is &#34; .. n print(s) Execute &#187; It can be extracted into a function and give it a name SayHello and parameter n Because the functions contain multiple statements we need to use end keyword to indicate end of function."><meta property="og:type" content="article"><meta property="og:url" content="https://martinkunc.github.io/lua-tutorial/docs/07-functions-local-and-global-scope/"><meta property="article:section" content="docs"><title>07. Functions, local and global scope | Lua tutorial</title><link rel=manifest href=/lua-tutorial/manifest.json><link rel=icon href=/lua-tutorial/favicon.png type=image/x-icon><link rel=stylesheet href=/lua-tutorial/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous><script defer src=/lua-tutorial/flexsearch.min.js></script>
<script defer src=/lua-tutorial/en.search.min.1e53d776e105d3b82bf6e80c3909b4ff025c4abea186664eaf15b11daa1cfe76.js integrity="sha256-HlPXduEF07gr9ugMOQm0/wJcSr6hhmZOrxWxHaoc/nY=" crossorigin=anonymous></script>
<script src=https://martinkunc.github.io/lua-tutorial//js/lua.vm.js?1661709686></script>
<link rel=stylesheet href=https://martinkunc.github.io/lua-tutorial//css/codemirror.css?1661709686><script src=https://martinkunc.github.io/lua-tutorial//js/codemirror.js?1661709686></script>
<link rel=stylesheet href=https://martinkunc.github.io/lua-tutorial//css/styles.css?1661709686><script src=https://martinkunc.github.io/lua-tutorial//js/lua.js?1661709686></script>
<script src=https://martinkunc.github.io/lua-tutorial//js/luacode.js?1661709686></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/lua-tutorial/><span>Lua tutorial</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/lua-tutorial/docs/01-installation/>01. Installation</a></li><li><a href=/lua-tutorial/docs/02-introduction/>02. Introduction</a></li><li><a href=/lua-tutorial/docs/03-types/>03. Types</a></li><li><a href=/lua-tutorial/docs/04-chunks-and-require/>04. Chunks and require</a></li><li><a href=/lua-tutorial/docs/05-string-functions/>05. String functions</a></li><li><a href=/lua-tutorial/docs/06-arrays/>06. Arrays and tables</a></li><li><a href=/lua-tutorial/docs/07-functions-local-and-global-scope/ class=active>07. Functions, local and global scope</a></li><li><a href=/lua-tutorial/docs/08-functions-with-multiple-results/>08. Functions with multiple results</a></li><li><a href=/lua-tutorial/docs/09-closures-iterators/>9. Closures and Iterators</a></li><li><a href=/lua-tutorial/docs/10-table-key-value-pairs/>10. Table Key value pairs</a></li><li><a href=/lua-tutorial/docs/11-cycles-for-while-pairs/>11. Cycles for and while</a></li><li><a href=/lua-tutorial/docs/12-common-standard-libraries-copy/>12. Common standard libraries</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/lua-tutorial/svg/menu.svg class=book-icon alt=Menu></label>
<strong>07. Functions, local and global scope</strong>
<label for=toc-control></label></div></header><article class=markdown><h2 id=functions>Functions
<a class=anchor href=#functions>#</a></h2><p>Instead of repeating some code block, or calling a dofile multiple times, we can use a function, which is an abstraction to structure a block of code.</p><p>These blocks are the same, except the variable n<div class=grid-container><div class=grid-item><textarea class=editor>
n = &#34;Alice&#34;
s = &#34;Hi, my name is &#34; .. n
print(s)

n = &#34;Bob&#34;
s = &#34;Hi, my name is &#34; .. n
print(s)
</textarea><div class=rowexecute><div class=execute><a href=# class=executeButton>Execute &#187;</a></div></div></div><div class=grid-item><div class=output><pre class=outputText></pre></div></div><script>attachCode(document.currentScript)</script></div></p><p>It can be extracted into a <code>function</code> and give it a name SayHello and parameter n
Because the functions contain multiple statements we need to use <code>end</code> keyword to indicate end of function.
Function starts with function keyword, then its name and in parenthesis can be list of parameters for it.<div class=grid-container><div class=grid-item><textarea class=editor>
function SayHello(n)
  s = &#34;Hi, my name is &#34; .. n
  print(s)
end
</textarea><div class=rowexecute><div class=execute><a href=# class=executeButton>Execute &#187;</a></div></div></div><div class=grid-item><div class=output><pre class=outputText></pre></div></div><script>attachCode(document.currentScript)</script></div>Note: We will cover anonymous functions later.</p><p>If we execute this block alone, nothing will happen, because we have only declared (specified) the function and its statements, but we didn&rsquo;t started it from anywhere. To call a function, we just type its name and within parenthesis provide a value for the parameters.<div class=grid-container><div class=grid-item><textarea class=editor>
function SayHello(n)
  s = &#34;Hi, my name is &#34; .. n
  print(s)
end
SayHello(&#34;Alice&#34;)
SayHello(&#34;Bob&#34;)
</textarea><div class=rowexecute><div class=execute><a href=# class=executeButton>Execute &#187;</a></div></div></div><div class=grid-item><div class=output><pre class=outputText></pre></div></div><script>attachCode(document.currentScript)</script></div></p><h2 id=local-variables>Local variables
<a class=anchor href=#local-variables>#</a></h2><p>Actually the variable <code>s</code> in our function is a <code>global</code> variable. It means that it shares the value with the rest of the code even outside of the function block.
That could lead to some unexpected variable changes when code is more complex.
Instead, we can isolate variable to be only defined in the block of code. To do it,
when we declare the variable we prefix it with <code>local</code>. For example:</p><pre tabindex=0><code>local s = &#34;Hi, my name is&#34; .. n
</code></pre><p>Such a variable then won&rsquo;t even exist outside of the function block, in the main program, or in another function.
It is beneficial to use local variable as much as possible to prevent the variable clashes, but in Lua it needs to be explicitly expressed.</p><h2 id=global-variables-and-global-scope>Global variables and global scope
<a class=anchor href=#global-variables-and-global-scope>#</a></h2><p>If the <code>local</code> prefix is missing, the variable is considered global, which means it is shared among all blocks.
The program which is not in any block is called global scope, in contrast code inside a function or other blocks is called local scope.
Variables declared with local prefix exists only it its scope.</p><p>If you look at following code, you will see that variable s is at first outside of function. It wasn&rsquo;t declared there, so at first it is <code>nil</code>.
Later, from global scope we call function SayHello with parameter Alice, which sets variable from global scope to &ldquo;Hi, my name is Alice&rdquo; and because it is global scope variable, it will change its value even in main program and this texts is printed out.<div class=grid-container><div class=grid-item><textarea class=editor>
print(&#34;Variable s in the beginning : &#34;,s)
function SayHello(n)
  s = &#34;Hi, my name is &#34; .. n
  print(s)
end
SayHello(&#34;Alice&#34;)
print(&#34;Variable s after SayHello(Alice) : &#34;,s)
SayHello(&#34;Bob&#34;)
print(&#34;Variable s after SayHello(Bob) : &#34;,s)
</textarea><div class=rowexecute><div class=execute><a href=# class=executeButton>Execute &#187;</a></div></div></div><div class=grid-item><div class=output><pre class=outputText></pre></div></div><script>attachCode(document.currentScript)</script></div></p><h2 id=lua-global-scope-table>Lua Global scope table
<a class=anchor href=#lua-global-scope-table>#</a></h2><p>In Lua, The global scope variables and functions are stored in special built-in table, called underscore G <code>_G</code>. For example we can access global variable directly throught the <code>_G</code> using:<div class=grid-container><div class=grid-item><textarea class=editor>
name = &#34;Jack&#34;
age = 51
print(_G.name, _G.age)
</textarea><div class=rowexecute><div class=execute><a href=# class=executeButton>Execute &#187;</a></div></div></div><div class=grid-item><div class=output><pre class=outputText></pre></div></div><script>attachCode(document.currentScript)</script></div></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>